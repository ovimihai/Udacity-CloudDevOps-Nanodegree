# Security In The Cloud

As adoption of cloud services has increased, so has the need for increased security in the cloud. The great thing about cloud security is that it not only protects data, it also protects applications that access the data. Cloud security even protects the infrastructure (like servers) that applications run on.

The way security is delivered depends on the cloud provider you're using and the cloud security options they offer.

___

## AWS WAF

AWS WAF (or AWS Web Application Firewall) provides a firewall that protects your web applications. WAF can stop common web attacks by reviewing the data being sent to your application and stopping well-known attacks.

### Tips

* WAF is found under the Security, Identity, & Compliance section on the AWS Management Console.
* WAF can protect web sites not hosted in AWS through Cloud Front.
* You can configure CloudFront to present a custom error page when requests are blocked.

AWS WAF is available under a composite dashboard, [WAF & Shield](https://console.aws.amazon.com/wafv2/shieldv2), that combines the following three services:

1. **AWS WAF**: It allows you to protect your web applications from common web exploits by monitoring and controlling the web requests coming to an Amazon API Gateway API, an Amazon CloudFront distribution, or an Application Load Balancer.

1. **AWS Shield**: It provides continuous DDoS attack detection and automatic mitigations. AWS Shield offers two tiers of protection - Standard and Advanced.

1. **AWS Firewall Manager**: It allows you to configure and manage firewall rules across accounts and applications centrally.

Within AWS WAF service, you can create _Web access control lists (web ACLs)_ to monitor HTTP(S) requests for AWS resources. You can protect the following types of resources:

* CloudFront distributions
* Regional resources (Application Load Balancer, API Gateway, AWS AppSync)

While creating a web ACL, you add rules, such as conditions like originating IP addresses, that determines whether to allow/block each request.

![](https://video.udacity-data.com/topher/2021/January/5ff5c365_screenshot-2021-01-06-at-7.24.44-pm/screenshot-2021-01-06-at-7.24.44-pm.png)

Five-step process to create a web ACL

___


## AWS Shield

AWS Shield is a managed DDoS (or Distributed Denial of Service) protection service that safeguards web applications running on AWS. AWS Shield offers two tiers of protection - Standard and Advanced.

* Standard tier: Standard AWS Shield is a service that you get "out of the box", it is always running (automatically) and is a part of the free standard tier.

* Advanced tier: If you want to use some of the more advanced features, you'll have to utilize the paid tier.
> 
> The standard AWS Shield Standard is always-on, using techniques to detect malicious traffic.

![](https://video.udacity-data.com/topher/2021/January/5ff5c446_screenshot-2021-01-06-at-7.37.40-pm/screenshot-2021-01-06-at-7.37.40-pm.png)

A sample summary of events detected by AWS Shield globally for two weeks.

If you want to view the threat-event summary for resources in your account, you will have to subscribe to the Shield Advanced. The summary will include statistics, such as total events, largest bit rate, largest packet rate, and the largest request rate.

![](https://video.udacity-data.com/topher/2021/January/5ff5c4a9_screenshot-2021-01-06-at-7.36.13-pm/screenshot-2021-01-06-at-7.36.13-pm.png)

A three-step process to subscribe to Sheild Advanced.

___

## Identity & Access Management

Identity & Access Management (IAM) is an AWS service that allows us to configure who can access our AWS account, services, or even applications running in our account. IAM is a global service and is automatically available across ALL regions.

AWS IAM service securely controls access to AWS resources by authenticating and authorizing (giving granular permissions) the individual users, applications, or services. Let's watch a demo next.

Let's learn about key IAM terms.

#### 1\. IAM User

A user is a unique identifier generated by the IAM service and recognized by all AWS services to grant access to AWS resources. A user can be a person, system, or application that requires access to AWS services. You can generate login credentials and access keys for any user in your account. Roles and policies control the scope (permissions) of a user's access to AWS resources in your account.

#### 2\. IAM Group

A group collects IAM users with the same level of permissions to access AWS resources. You can attach or detach permissions to a group using access control policies. A group makes it easier to manage IAM users with the same level of permissions.

#### 3\. IAM Role

A role is simply a set of policies (permissions) to access AWS services. You can assign a role either to an IAM user or an AWS service such as EC2\. Creating and storing roles helps to delegate access with defined permissions without sharing long-term access keys.

#### Difference between an IAM role and an IAM user

An IAM user has permanent credentials that can be used to interact with AWS services directly. In contrast, an IAM role does not have any credentials; hence it cannot make direct requests to AWS services. IAM roles are assumed by authorized entities, such as IAM users, applications, or other AWS services.

#### 4\. IAM Policy

An access control policy is a JSON file that defines the resource to grant access, level of access, and allowed actions. You can attach a policy to multiple users, groups, or roles to assign permissions to AWS resources.

AWS offers predefined policies that are managed by AWS. You can even create, save, and attach custom policies, as shown below

![](https://video.udacity-data.com/topher/2021/January/5ff5b2d0_screenshot-2021-01-06-at-6.08.07-pm/screenshot-2021-01-06-at-6.08.07-pm.png)

Create a custom policy using either a visual or a JSON editor

See a sample IAM policy that allows full EC2 access within a specific AWS region:
    
    { "Version": "2012-10-17", "Statement": [ { "Action": "ec2:*", "Resource": "*", "Effect": "Allow", "Condition": { "StringEquals": { "ec2:Region": "us-east-2" } } } ] } 

You can have a look at many more managed policies here: [Example IAM identity-based policies](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_examples.html)

#### How do I know if my custom policy is having the desired access permissions?

AWS offers a utility, [IAM policy simulator](https://policysim.aws.amazon.com/), where you can evaluate, and validate the effects of your access control policies.

#### Recommended Read

1. StackOverflow discussion - [Difference between IAM role and IAM user in AWS](https://stackoverflow.com/questions/46199680/difference-between-iam-role-and-iam-user-in-aws)

1. In addition to IAM policies, AWS offers other types of policies, such as an S3 Bucket Policy, an SNS Topic Policy, a VPC Endpoint Policy, and an SQS Queue Policy. There is a helpful utility, [AWS Policy Generator](https://awspolicygen.s3.amazonaws.com/policygen.html), that can generate either of the policies mentioned above.

1. [AWS IAM FAQs](https://aws.amazon.com/iam/faqs/?nc=sn&loc=5) - must read.

___



